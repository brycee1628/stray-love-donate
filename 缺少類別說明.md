### Admin 類別設計說明

-   **沒有獨立的類別檔案**
-   **設計原因**：因為不能讓使用者在前台註冊管理員帳號，權限是直接由資料庫給的。
-   **實作方式**：`User.role === 'Admin'` 實現管理員角色
-   **功能實作**：管理員的特殊功能分散在各個工具函數中
-   主要實作位置：
    -   基礎定義：`src/models/User.js`
    -   權限檢查：`src/router/guards.js`
    -   認證狀態：`src/composables/useAuth.js`
    -   視圖頁面：`src/views/Admin.vue`
    -   功能實作：`src/utils/pets.js`、`src/utils/adoption.js`、`src/utils/users.js`

### 1. 基礎定義

-   **檔案**：[`src/models/User.js`](src/models/User.js)
    -   `role` 屬性：`'Admin'` 表示管理員角色

### 2. 權限檢查

-   **檔案**：[`src/router/guards.js`](src/router/guards.js)
    -   `requireAdmin()` 函數：路由守衛，檢查是否為管理員
    -   檢查邏輯：`user.role !== 'Admin'` 時拒絕存取

---

### AuditLog 設計說明

-   **沒有獨立的類別檔案**
-   **說明**：實作了此功能，但放在了工具函數裡使用。
-   **實作方式**：通過工具函數直接操作資料庫的 `auditLogs` 集合
-   主要實作位置：
    -   核心工具：`src/utils/audit.js`
    -   視圖頁面：`src/views/AuditLog.vue`
    -   自動記錄：`src/utils/pets.js`、`src/utils/adoption.js`、`src/utils/users.js`

### 1. 實作

-   **檔案**：[`src/utils/audit.js`](src/utils/audit.js)
    -   **`AuditActionType` 常數**：定義操作類型
        -   `PET_REVIEW_APPROVE`、`PET_REVIEW_REJECT`
        -   `ADOPTION_APPROVE`、`ADOPTION_REJECT`
        -   `USER_SUSPEND`、`USER_UNSUSPEND`
        -   `USER_DELETE`、`USER_UPDATE`
    -   **`createAuditLog(actionType, details)` 函數**：建立稽核記錄
        -   記錄管理員資訊（adminId, adminEmail, adminName）
        -   記錄目標資訊（targetId, targetType）
        -   記錄操作詳情（action, reason, previousStatus, newStatus）
        -   記錄時間戳記（timestamp）
    -   **`getAuditLogs(filters, limitCount)` 函數**：取得稽核記錄列表
        -   支援篩選（actionType, adminId, targetId, targetType）
        -   按時間戳記降序排列

### 2. 自動記錄位置

-   **檔案**：[`src/utils/pets.js`](src/utils/pets.js)

    -   `reviewPet()` 函數中呼叫 `createAuditLog()`
    -   記錄寵物審核操作

-   **檔案**：[`src/utils/adoption.js`](src/utils/adoption.js)

    -   `reviewAdoptionApplication()` 函數中呼叫 `createAuditLog()`
    -   記錄領養申請審核操作

-   **檔案**：[`src/utils/users.js`](src/utils/users.js)
    -   `suspendUser()` 函數中呼叫 `createAuditLog()`
    -   `unsuspendUser()` 函數中呼叫 `createAuditLog()`
    -   記錄會員停權/解除停權操作

### 3. 資料庫集合

-   **Firestore 集合**：`auditLogs`
    -   定義在 [`src/utils/audit.js`](src/utils/audit.js) 第 6 行
